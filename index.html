<!DOCTYPE html>
<html>
<head>
  <title>Seal University Grievance Portal</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; color: #222; text-align: center; }
    .container { width: 80%; margin: auto; padding: 20px; }
    .hidden { display: none; }
    button { margin: 10px; padding: 10px 20px; background: black; color: white; border: none; cursor: pointer; }
    button:hover { background: #444; }
    .complaint { border: 1px solid #aaa; padding: 10px; margin: 10px 0; background: #fff; text-align: left; }
    .progress { margin: 5px; font-size: 14px; }
    nav { margin-bottom: 20px; }
    nav button { background: #222; }
    select, input, textarea { padding: 6px; margin: 4px; }
  </style>
</head>
<body>

  <div class="container">
    <h1>Seal University Grievance Portal</h1>
    
    <!-- NAVIGATION -->
    <nav>
      <button onclick="showPage('loginPage')">Home</button>
      <button onclick="showPage('dashboard')">Dashboard</button>
      <button onclick="showPage('supportPage')">Support</button>
      <button onclick="logout()">Logout</button>
    </nav>

    <!-- LOGIN PAGE -->
    <div id="loginPage">
      <h2>Welcome</h2>
      <p>All issues reported here are <b>anonymous</b>. We will work to resolve them quickly.</p>
      <input id="username" placeholder="Enter Name"><br><br>
      <input id="password" type="password" placeholder="Enter Password"><br><br>
      <button onclick="login(false)">Login as User</button>
      <button onclick="login(true)">Login as Admin</button>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboard" class="hidden">
      <h2>User Dashboard</h2>
      <button onclick="addComplaintForm()">+ Add Complaint</button>
      <button onclick="removeComplaint()">- Remove Complaint</button>
      
      <!-- Category filter -->
      <h3>Filter Complaints</h3>
      <select id="filterCategory" onchange="renderComplaints()">
        <option value="all">All Categories</option>
        <option>Academic</option>
        <option>Hostel</option>
        <option>Infrastructure</option>
        <option>Finance</option>
        <option>Disciplinary</option>
        <option>Other</option>
      </select>

      <h3>Your Complaints</h3>
      <div id="complaintList"></div>
    </div>

    <!-- COMPLAINT FORM -->
    <div id="complaintFormPage" class="hidden">
      <h2>Submit Complaint</h2>
      <label>Category: 
        <select id="category">
          <option>Academic</option>
          <option>Hostel</option>
          <option>Infrastructure</option>
          <option>Finance</option>
          <option>Disciplinary</option>
          <option>Other</option>
        </select>
      </label><br><br>
      <label>Description:<br><textarea id="description"></textarea></label><br><br>
      <label>Email: <input id="email"></label><br><br>
      <label>Priority: 
        <select id="priority">
          <option>Low</option>
          <option>Medium</option>
          <option>High</option>
        </select>
      </label><br><br>
      <label><input type="checkbox" id="anonCheck"> Confirm Anonymity</label><br><br>
      <button onclick="submitComplaint()">Submit</button>
      <button onclick="showPage('dashboard')">Cancel</button>
    </div>

    <!-- SUPPORT PAGE -->
    <div id="supportPage" class="hidden">
      <h2>Support / Help / Contact</h2>
      <p>Email: support@sealuniversity.edu</p>
      <p>Phone: +91-1234567890</p>
      <p>Office: Student Affairs, Main Building</p>
    </div>
  </div>

  <script>
    let complaints = JSON.parse(localStorage.getItem("complaints")) || [];
    let loggedIn = false;
    let isAdmin = false;

    function showPage(pageId) {
      // Prevent direct dashboard access without login
      if (pageId === "dashboard" && !loggedIn) {
        alert("Please login first.");
        pageId = "loginPage";
      }

      document.querySelectorAll('.container > div').forEach(div => div.classList.add('hidden'));
      document.getElementById(pageId).classList.remove('hidden');

      if (pageId === "dashboard") renderComplaints();
    }

    function login(adminMode) {
      let user = document.getElementById("username").value;
      if (!user) { alert("Enter name to continue."); return; }

      loggedIn = true;
      isAdmin = adminMode;

      if (isAdmin) {
        alert("Admin login successful. (Prototype)");
      } else {
        alert("Login successful. Welcome " + user);
      }

      showPage("dashboard");
    }

    function logout() {
      loggedIn = false;
      isAdmin = false;
      alert("You have been logged out.");
      showPage("loginPage");
    }

    function addComplaintForm() { showPage("complaintFormPage"); }

    function submitComplaint() {
      let category = document.getElementById("category").value;
      let description = document.getElementById("description").value;
      let email = document.getElementById("email").value;
      let priority = document.getElementById("priority").value;
      let anon = document.getElementById("anonCheck").checked;

      if (!description) { alert("Fill in the description."); return; }

      let complaint = {
        id: "C" + Date.now(),
        category, description, email, priority,
        anon, status: "Pending"
      };

      complaints.push(complaint);
      localStorage.setItem("complaints", JSON.stringify(complaints));

      alert("Your email " + email + " will receive a confirmation mail regarding this submission (mock).");
      showPage("dashboard");
    }

    function renderComplaints() {
      let list = document.getElementById("complaintList");
      list.innerHTML = "";
      if (complaints.length === 0) {
        list.innerHTML = "<p>No complaints submitted yet.</p>";
        return;
      }

      let filter = document.getElementById("filterCategory").value;
      complaints
        .filter(c => filter === "all" || c.category === filter)
        .forEach(c => {
          let div = document.createElement("div");
          div.className = "complaint";
          div.innerHTML = `
            <b>ID:</b> ${c.id} <br>
            <b>Category:</b> ${c.category} <br>
            <b>Description:</b> ${c.description} <br>
            <b>Priority:</b> ${c.priority} <br>
            <b>Status:</b> ${c.status} <br>
            <div class="progress">[ ${c.status === "Pending" ? "ðŸ”´ Pending" : "ðŸŸ¢ Resolved"} ]</div>
          `;
          list.appendChild(div);
        });
    }

    function removeComplaint() {
      if (complaints.length === 0) { alert("No complaints to remove."); return; }
      complaints.pop();
      localStorage.setItem("complaints", JSON.stringify(complaints));
      renderComplaints();
    }

    // Default page
    showPage("loginPage");
  </script>

</body>
</html>





